# Hand detector game

### Сервер на стороне python
###### Распознавание объектов

Для распознавания объектов с камеры использована библиотека [**mediapipe**](https://mediapipe.dev/)
![Распознавание рук](https://mediapipe.dev/images/mobile/hand_crops.png)

Данная библиотека может распознавать и выстраивать 3D координаты точек на лицах, техал и так далее. Очень мощная штука.
В результате её работы на каждом кадре мы получаем 21 3D-координату одной руки. Данная библиотека открывает большое количество возможностей.

![Координаты](https://mediapipe.dev/images/mobile/hand_landmarks.png)

Установка происходит в 1 строчку:
```sh
pip install mediapipe
```

Для удобства передачи и взаимодействия, все координаты было принято округлять до 3 знаков после запятой и соединять в строки разделяя символом "\_". Каждая точка имеет 3 координаты по осям **X**, **Y** и **Z**.

![image](https://user-images.githubusercontent.com/80288959/207137797-6a228676-6494-4575-b0f5-1d6644d955fa.png)

Работа **mediapipe** вынесена в отдельный класс для удобства. Конструктор инициализирует камеру и подключает расширение для отрисовки и обнаружения кистей рук.

```python
class Hand_det_pythonClass:

    def __init__(self):
        self.mp_drawing = mp.solutions.drawing_utils
        self.mp_hands = mp.solutions.hands
        self.cap = cv2.VideoCapture(0)
```

###### Реализация сервера на python

Сервер реализован на знакомых многим сокетах. В качестве ip адреса используется "_"localhost"_" с любым свободным портом.

После подключения клиента создаётся объект экземпляр класса для распознавания объектов.

```python
detect = Hand_det_pythonClass()
```

После этого запускается бесконечный цикл, получающий новые координаты и отправляющий их клиенту для обработки.

(В случае если координаты не найдены, клиенту отправляется фраза "_nothing_")

```python
while True:
    coord = detect.get_coord()

    if coord:
        user.send(f"{ coord }".encode("utf-8"))
    else:
        user.send(f"nothing".encode("utf-8"))
```
